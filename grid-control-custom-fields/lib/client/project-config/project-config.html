<template name="custom_fields_conf">
  <div class="custom-fields-conf">
    <div class="config-section-header">
      <div class="config-section-title">
        {{_ "grid_control_custom_fields_section_title"}}
        {{#if showCustomFieldsSortOption}}
        <div class="sort-custom-fields text-primary" sort-criteria="label">{{_ "grid_control_custom_fields_sort_by_name_label"}}</div>
        {{/if}}
      </div>
      <div class="dropdown add-new-field-dropdown">
        <div class="add-new-field-toggle text-primary" data-toggle="dropdown" aria-expanded="false">
          <svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#plus"/></svg>
          {{_ "grid_control_custom_fields_new_custom_field_label"}}
        </div>
        <div class="dropdown-menu jd-p-075 animate slideIn shadow-lg border-0">
          <div class="d-flex align-items-center">
            <input class="new-field-label form-control form-control-sm" placeholder="{{_ "grid_control_custom_fields_label_placeholder"}}" maxlength="30">
            <select class="new-field-type form-control form-control-sm mx-2">
              {{#each getFieldTypes}}
                <option value="{{custom_field_type_id}}">{{getI18nTextOrFallback fallback_text=label i18n_key=label_i18n}}</option>
              {{/each}}
            </select>
            <button class="add btn btn-primary btn-sm" disabled="{{addButtonDisabled}}">{{_ "add"}}</button>
          </div>
        </div>
      </div>
    </div>
    <div class="custom-fields-list">
      {{#if customFields}}
        {{#with customFields}}
          {{#each this}}
            {{> custom_field_conf}}
          {{/each}}
        {{/with}}
      {{else}}
        <div class="custom-fields-list-empty bg-light">
          {{_ "grid_control_custom_fields_no_custom_fields_label"}}
        </div>
      {{/if}}
    </div>
  </div>
</template>


<template name="custom_field_conf">
  <div class="custom-field-item custom-field-row" field-id="{{field_id}}">
    <div class="custom-field-handle">
      <svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#more-vertical-double"/></svg>
    </div>
    <div class="custom-field-label flex-grow-1">
      <input class="field-label" placeholder="label" value="{{label}}" maxlength="30">
    </div>
    <div class="custom-field-type">
      {{#if settingsButtonTemplate}}
        {{> UI.dynamic template=settingsButtonTemplate}}
        <div class="custom-field-type-divider"></div>
      {{/if}}
      <span class="custom-field-type-label">{{fieldTypeToFieldLabel}}</span>
      <div class="custom-field-type-divider"></div>
      <svg class="jd-icon remove"><use xlink:href="/layout/icons-feather-sprite.svg#x"/></svg>
    </div>
  </div>
</template>

$tree_control_icons_sprite_bg: url('/packages/stem-capital_grid-control/lib/client/formatters-and-editors/textarea-with-tree-controls/media/tree-control-icons-sprite.png') no-repeat center center

.text-tree-control
  position: relative
  width: 100%
  height: 100%

.grid-tree-control-text
  text-align: left

.grid-tree-control-activation-area
  position: absolute
  top: 0
  bottom: 0
  left: 0
  background-color: transparent

.grid-tree-control-toggle
  display: none
  height: 23px
  width: 20px
  position: absolute
  top: 4px

  .slick-row:first-child &, .slick-row.f-first &
    top: 4px

=expandIcon()
  // background: $tree_control_icons_sprite_bg
  // background-position: -3px -125px

  // We end up using the following since the border contrast is better
  background: url('/packages/stem-capital_grid-control/lib/client/formatters-and-editors/textarea-with-tree-controls/media/expand.gif') no-repeat center center

=collapseIcon()
  // background: $tree_control_icons_sprite_bg
  // background-position: -3px -98px

  // We end up using the following since the border contrast is better
  background: url('/packages/stem-capital_grid-control/lib/client/formatters-and-editors/textarea-with-tree-controls/media/collapse.gif') no-repeat center center

.grid-tree-control-toggle
  // .collapse is part of the bs4 framework, hence, we can't use the same name.
  &._collapse, &.expand
    display: block

    .f-leaf &
      // If is a leaf under current filter
      display: none

    .f-leaf.sortable-new-level-mode-parent &
      display: block

      +collapseIcon()

  .sortable-new-level-mode-parent &, .f-leaf.sortable-new-level-mode-parent &
    // for case without filter it's a leaf
    display: block
    +collapseIcon()

  &._collapse
    +expandIcon()

    cursor: zoom-in
    cursor: -webkit-zoom-in
    cursor: -moz-zoom-in
    cursor: ms-zoom-in

  &.expand

    +collapseIcon()

    cursor: zoom-out
    cursor: -webkit-zoom-out
    cursor: -moz-zoom-out
    cursor: -ms-zoom-out

.grid-tree-control-task-id
  position: absolute
  font-size: 12px
  font-weight: normal
  padding: 0px 4px
  top: 6px
  width: 25px
  box-sizing: content-box
  background-color: rgb(238, 239, 242)
  color: #525F7F
  border: 1px solid rgba(82, 95, 127, 0.2);
  opacity: 1
  border-radius: 3px
  text-align: center
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.08);

  .slick-row:first-child &, .slick-row.f-first &
    top: 6px

.grid-tree-control-user
  position: absolute
  top: 2px
  cursor: pointer

  img
    width: inherit
    border-radius: 90px

  .transfer-owner
    width: 14px
    height: 14px
    position: absolute
    right: 0
    bottom: 0
    background: $tree_control_icons_sprite_bg

  .transfer-non-related
    background-position: 0 -14px

  .transfer-to-me
    background-position: 0 -28px

  .transfer-from-me
    background-position: 0 0

.grid-tree-control-user-img
  transition: transform 0.2s linear, box-shadow 0.2s linear

  &:hover
    transform: scale(0.95)
    box-shadow: 0 0 0 3px rgb(225, 225, 225)

.grid-tree-control-item-icons
  float: right

  .fa
    cursor: pointer

.jd-icon.jd-icon-context-menu
  padding: 0
  width: 14px
  height: 20px
  border-radius: 2px
  margin-right: -1px
  margin-top: -5px
  opacity: 0.4
  transition: opacity 0.2s linear

.slick-cell.active,
.text-tree-control:hover
  .jd-icon-context-menu
    opacity: 1

.grid-tree-control-priority
  width: 6px
  height: auto
  position: absolute
  border-radius: 1px
  top: 3px
  bottom: 3px
  outline: 3px solid white
  border: none

.jdt-play
  visibility: hidden

  .text-tree-control:hover &
    visibility: visible

.jdt-grid-icon
  height: 22px
  line-height: 22px
  width: 19px

.jdt-stop
  color: red

.chat-messages
  display: inline-block
  position: relative
  top: -1px

.chat-messages-new
  color: #0170d5

.task-is-archived-project
  color: #9c9c9c

.resource_planner
  color: #9c9c9c

  &.task-planned-or-executed-by-current-user
    color: inherit

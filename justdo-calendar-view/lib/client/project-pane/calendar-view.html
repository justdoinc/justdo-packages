<template name="justdo_calendar_project_pane">
  <div>
    Display Calendar for {{title_date}} :
    <i class="fa fa-fast-backward calendar-view-prev-week" aria-hidden="true"></i>
    <i class="fa fa-step-backward calendar-view-prev-day" aria-hidden="true"></i>
    <i class="fa fa-calendar-o calendar-view-back-to-today" aria-hidden="true"></i>
    <i class="fa fa-step-forward calendar-view-next-day" aria-hidden="true"></i>
    <i class="fa fa-fast-forward calendar-view-next-week" aria-hidden="true"></i>
    <table width="100%">
      <tr>
        <th></th>
        {{#each datesToDisplay}}
          <th width="15%">{{this}}</th>
        {{/each}}
      </tr>
      {{> justdo_calendar_project_pane_user_view user_id="unassigned_user_hours" dates_to_display=datesToDisplay}}
      {{> justdo_calendar_project_pane_user_view user_id=currentUserId dates_to_display=datesToDisplay}}
      {{#each allOtherUsers}}
        {{> justdo_calendar_project_pane_user_view user_id=this dates_to_display=datesToDisplay}}
      {{/each}}
    </table>
  </div>
</template>


<template name="justdo_calendar_project_pane_user_view">
  {{#each rowNumbers}}
    <tr user_id={{userId}}>
      {{#each colNumbers}}
        {{#if topLeftCell}}
          <td rowspan={{numberOfRows}}>
            {{#if rowForUnassignedUser}}
              (UA)
            {{else}}
              {{#with userObj}}
                {{> justdo_avatar}}
              {{/with}}
            {{/if}}
          </td>
        {{else if leftCell}}
        {{else}}
          {{#unless skipTD}}
            <td class="calendar_view_droppable highlight_on_mouse_in" date={{columnDate}} colspan={{colSpan}}>
              {{#if taskId}}
                <div class="calendar_task_cell calendar_view_draggable {{dimWhenPendingOwner}}" task_id={{taskId}} type={{type}}>
                  {{#if startDateAfterDueDate}}
                    (!)
                  {{/if}}

                  {{#if isFollowupDate}}
                    (F)
                  {{/if}}
                  {{#if isPrivateFollowupDate}}
                    (PF)
                  {{/if}}
                  {{#if isRegularTask}}
                    {{#if startsBeforeView}}
                      &lt;&lt;
                    {{/if}}
                    (R) {{plannedHours}}
                    {{taskTitle}}
                    {{#if endsAfterView}}
                      &gt;&gt;
                    {{/if}}
                   {{else}}
                     {{taskTitle}}
                   {{/if}}
                </div>
              {{/if}}
            </td>
          {{/unless}}
        {{/if}}
      {{/each}}
    </tr>
  {{/each}}

</template>
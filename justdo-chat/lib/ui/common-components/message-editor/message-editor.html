<template name="common_chat_message_editor">
  <div class="message-editor-wrapper {{#if isSendingState}}bg-light disabled{{/if}}">
    {{#if isFilesEnabled}}
      <div class="drop-pane text-muted {{#if isDraggingFilesIntoDropPane}}dragging{{/if}}">
        <div class="drop-pane-overlay">
          {{_ "chat_drop_pane_overlay"}}
        </div>
      </div>
      <div class="files-wrapper m{{getRtlAwareDirection "r"}}-1 {{#if isDraggingFilesIntoDropPane}}d-none{{/if}}">
        <svg class="jd-icon attach-files"><use xlink:href="/layout/icons-feather-sprite.svg#paperclip"/></svg>
        {{#if filesCount}}
          <div class="files-count">{{filesCount}}</div>
        {{/if}}

        <input type="file" class="message-editor-file-input" multiple/>
      </div>
    {{/if}}
    <textarea class="message-editor" dir="{{#if isRtl}}rtl{{else}}ltr{{/if}}" disabled="{{#if isSendingState}}disabled{{/if}}" placeholder="{{_ "message_editor_input_placeholder"}}"></textarea>
    <button class="btn p-0 message-editor-send text-primary {{#if showSendButton}}show{{/if}} m{{getRtlAwareDirection "r"}}-3 {{#if isDraggingFilesIntoDropPane}}d-none{{/if}}" {{isSendButtonDisabled}}>
      {{#if isSendingState}}{{_ "message_editor_sending"}}{{else}}{{_ "send"}}{{/if}}
    </button>

  </div>

  {{#with error}}
    <div class="chat-error text-danger">{{{xssGuard this}}}</div>
  {{/with}}
</template>

<template name="common_chat_message_editor_files_dropdown">
  {{#each attachedFiles}}
    <div class="dropdown-item" data-file-key="{{_id}}">
      <div class="dropdown-item-content">
        <div class="sort-handle">
          <svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#more-vertical-double"/></svg>
        </div>
        <div class="file-name-and-size">
          <div class="file-name">{{name}}</div>
          <div class="file-size text-muted small">{{bytesToHumanReadable size}}</div>
        </div>
      </div>
      <div class="remove-file"><svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#trash-2"/></svg></div>
    </div>
  {{/each}}
</template>
<template name="common_chat_messages_board">
    <div class="messages-board-viewport">
      <div class="messages-board">
        {{#each messages}}
          {{#if showMsgSeperatorWithDate @index}}
            {{> chat_message_date_seperator}}
          {{/if}}

          {{#if isBotLogMessage}}
            {{> bot_log_chat_messages_board_message_card}}
          {{else}}
            {{> common_chat_messages_board_message_card}}
          {{/if}}
        {{/each}}
      </div>
    </div>
</template>

<template name="chat_message_date_seperator">
  <div class="message-date-seperator">
    <small class="text-secondary">{{formatMsgDate createdAt}}</small>
  </div>
</template>

<template name="bot_log_chat_messages_board_message_card">
  <div class="message-card bot-log-message">
    <div class="message-container">
      <div dir="auto" class="message-body">
        {{{body}}}
      </div>
    </div>
  </div>
</template>

<template name="common_chat_messages_board_message_card">
  <div class="message-card {{#if myMessage}}my-message{{/if}}">
    {{#if shouldShowAvatar}}
      <div class="avatar">{{#with authorDoc}}{{> justdo_avatar}}{{/with}}</div>
    {{/if}}
    <div class="message-container {{#if myMessage}}bg-primary{{/if}}">
      <div class="message-header">
        {{#if shouldShowAuthorName}}
          <span class="author">
              {{> display_name_with_graphic_unverified_warning authorDoc}}
          </span>
        {{/if}}
        <span class="date" title="{{userDateFormat createdAt}}">{{friendlyTimeFormat createdAt false}}</span>
      </div>
      {{#if $and isFilesEnabled fileExistsInMessage}}
        {{#with files}}
          <div class="files-container small">
            {{#each existing_files}}
              <div class="file-container">
                <a href="#" class="show-preview-or-start-download text-info" title="{{name}}">
                  <div class="file-info">
                    <span class="type-logo {{typeClass}}"></span>
                    <div class="file-name-wrapper">
                      <span class="file-name">{{name}}</span>
                      <span class="file-size">{{size}}</span>
                    </div>
                  </div>
                </a>
              </div>
            {{/each}}

            {{#each missing_files}}
              <div class="file-container">
                <div class="file-info">
                  <span class="type-logo {{typeClass}}"></span>
                  <div class="file-name-wrapper">
                    <span class="file-name">{{name}}</span>
                    <span class="file-size">{{size}}({{_ "inbound_emails_file_removed"}})</span>
                  </div>
                </div>
              </div>
            {{/each}}
            {{#if existing_files}}
              <div class="files-footer">
                <div>{{_ "chat_files_saved_to_files_tab"}}</div>
              </div>
            {{/if}}
          </div>
        {{/with}}
      {{/if}}
      {{#if body}}
        <div dir="auto" class="message-body {{#if $and isFilesEnabled fileExistsInMessage}}mt-2{{/if}}">
          {{{body}}}
        </div>
      {{/if}}
    </div>
  </div>
</template>

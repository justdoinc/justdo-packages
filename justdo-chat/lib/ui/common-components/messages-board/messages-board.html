<template name="common_chat_messages_board">
    <div class="messages-board-viewport">
      <div class="messages-board">
        {{#each messages}}
          {{#if showMsgSeperatorWithDate @index}}
            {{> chat_message_date_seperator}}
          {{/if}}

          {{#if isBotLogMessage}}
            {{> bot_log_chat_messages_board_message_card}}
          {{else}}
            {{> common_chat_messages_board_message_card}}
          {{/if}}
        {{/each}}
      </div>
    </div>
</template>

<template name="chat_message_date_seperator">
  <div class="message-date-seperator">
    <small class="text-secondary">{{formatMsgDate createdAt}}</small>
  </div>
</template>

<template name="bot_log_chat_messages_board_message_card">
  <div class="message-card bot-log-message">
    <div class="message-container">
      <div dir="auto" class="message-body">
        {{{body}}}
      </div>
    </div>
  </div>
</template>

<template name="common_chat_messages_board_message_card">
  <div class="message-card {{#if myMessage}}my-message{{/if}}">
    {{#if shouldShowAvatar}}
      <div class="avatar">{{#with authorDoc}}{{> justdo_avatar}}{{/with}}</div>
    {{/if}}
    <div class="message-container {{#if myMessage}}bg-primary{{/if}}">
      <div class="message-header">
        {{#if shouldShowAuthorName}}
          <span class="author">
              {{> display_name_with_graphic_unverified_warning authorDoc}}
          </span>
        {{/if}}
        <span class="date" title="{{userDateFormat createdAt}}">{{friendlyTimeFormat createdAt false}}</span>
      </div>
      {{#with files}}
        <div class="files-container small">
          <div class="files-header text-muted">
            <div>{{_ "inbound_emails_files_saved_to_files_tab"}}</div>
          </div>
          {{#each this}}
            <div class="file-container">
              {{#if isFileExist}}
                <a href="#" class="show-preview-or-start-download text-info" title="{{name}}">
                  <div class="file-info">
                    <span class="type-logo {{typeClass}}"></span>
                    <span class="file-name">{{name}}</span>
                  </div>
                </a>
              {{else}}
                <span class="text-danger file-name">{{name}}</span>
              {{/if}}
              <span class="file-size {{#if isFileExist}}text-muted{{else}}text-danger{{/if}}">{{size}}</span>
              {{#if $not isFileExist}}
                <div class="file-not-found text-danger">{{_ "inbound_emails_file_removed"}}</div>
              {{/if}}
            </div>
          {{/each}}
        </div>
      {{/with}}
      <div dir="auto" class="message-body mt-2">
        {{{body}}}
      </div>
    </div>
  </div>
</template>

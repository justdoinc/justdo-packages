<template name="recent_activity_item_task">
  <div class="recent-activity-item recent-activity-item-task {{#if unread}}unread{{/if}}">
    <div class="recent-activity-item-bg bg-primary"></div>

    <div class="recent-activity-item-content">
      <div class="item-header d-flex align-items-center">
        <div class="main-block">
          <div class="task-details">
            <a href="{{taskURL}}" class="project text-primary"><strong>{{#with channelProject}}{{#if title}}{{title}}{{else}}Untitled JustDo{{/if}}{{/with}}:</strong>
              {{#with channel_task}}
                #{{seqId}} - {{title}}
              {{/with}}
            </a>
          </div>
        </div>
        <div class="date-block text-nowrap">
          <small class="date text-muted" title="{{userDateFormat last_message_date}}">{{friendlyDateFormat last_message_date}}</small>
        </div>
      </div>

      <div class="item-body d-flex">
        <div class="main-block">
          {{#if $or channel_last_message.body channel_last_message.data}}
            <span class="last-author">{{#with last_message_author}}{{displayName}}{{/with}}: </span><span class="last-message">{{#with channel_last_message}}{{body}}{{/with}}</span>
          {{else if channel_last_message.files_count}}
            {{{xssGuard(_ "chat_dropdown_message_with_files_only_html" author=(displayName last_message_author) count=channel_last_message.files_count)}}}
          {{/if}}
        </div>
        <div class="read-indicator-block tooltip-container">
          <div class="read-indicator {{#if unread}}bg-primary{{/if}}"></div>
          <div class="tooltip-content tooltip-left">{{#if unread}}{{_ "chat_dropdown_mark_as_read"}}{{else}}{{_ "chat_dropdown_mark_as_unread"}}{{/if}}</div>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="task_pane_justdo_files_task_pane_section_section">
  {{>justdo_files_gallery}}

  {{> justdo_files_uploader}}
</template>

<template name="justdo_files_gallery">
  <ul class="files-gallery-list">
    {{#each files}}
      <li><a href="{{fileURL this}}" download="{{this.name}}" target="_blank">{{name}}</a> <span class="remove-file"><i class="fa fa-trash" aria-hidden="true"></i></span></li>
    {{/each}}
  </ul>
</template>

<template name="justdo_files_uploader">
  <div class="drop-pane {{getState}}">
    <label for="file-input" class="custom-file-input">
      {{#if hasPreviousUploadResult}}
        <div class="prev-upload-result">
          {{#if $gt numSuccessfulUploads 0}}
            <div class="upload-success-msg">{{numSuccessfulUploads}} file(s) uploaded successfully.</div>
          {{/if}}
          {{#if $gt numFailedUploads 0}}
            {{numFailedUploads}} file(s) failed to upload:
            {{#each getFailedUploads}}
              <div class="upload-failed-entry" data-toggle="tooltip" data-placement="bottom" title="{{this.err_msg}}">
                <span>{{this.file.name}}</span>
                <i class="fa fa-exclamation-circle"></i>
              </div>
            {{/each}}
          {{/if}}
        </div>
      {{/if}}
      
      <span class="upload-msg">
        {{#if $eq getState "ready"}}
          {{#if hasPreviousUploadResult}}
            Drop or click to upload other file(s)
          {{else}}
            Drop file(s) here or click to upload
          {{/if}}
        {{else if $eq getState "uploading"}}
          {{getUploadProcessMsg}}
        {{else}}
          ...
        {{/if}}
      </span>

      <span class="drop-to-upload-msg">
        Drop to upload
      </span>

    </label>
    <input id="file-input" type="file" multiple />
  </div>
</template>
<template name="members_multi_selector_widget">
  <div class="members-multi-selector dropdown {{#if memberFilterIsActive}}member-filter-is-active{{/if}}">
    <div class="toggle-dropdown-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <div class="member-filter-indicator bg-primary"></div>
      <svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#users"/></svg>
    </div>
    <div class="dropdown-menu jd-p-075 shadow-lg border-0">
      {{#if showDropdownMenu}}
        <input class="members-multi-selector-search form-control form-control-sm mb-2 bg-light border-0" type="text" placeholder="{{_ "search_members"}}" name="" value="">
        {{#with filteredMembers this.members}}
          {{#if $gt this.length 0}}
            <div class="dropdown-header text-primary font-weight-bold px-2">
              Show:
              <span class="members-selector-show-all">All</span>,
              <span class="members-selector-show-none">None</span>
            </div>
          {{/if}}
          {{#each this}}
            <a href="#" class="dropdown-item members-selector-filter-member-item {{#if memberInFilter this}}member-in-filter{{/if}}">
              <div class="members-selector-filter-member-info"><img class="members-selector-member-avatar" src="{{memberAvatar this}}"> {{memberName this}}</div>
              {{#if memberInFilter this}}
                <svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#check"/></svg>
              {{/if}}
            </a>
          {{/each}}
        {{/with}}
      {{else}}
        <div class="loading-message">Loading...</div>
      {{/if}}
    </div>
  </div>
</template>

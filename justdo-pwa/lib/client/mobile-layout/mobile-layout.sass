@import "{justdoinc:justdo-pwa}/lib/client/global-styles/_vars.scss"
@import "{justdoinc:justdo-webapp-layout}/lib/client/global-sass/global-vars.sass"

$mobile-navbar-height: 92px

$mobile-tab-vertical-padding: 12px
$mobile-tab-horizontal-padding: 20px

$mobile-tab-title-margin-bottom: 4px
$mobile-tab-title-line-height: 1.5em

// Since mobile-tab is fixed position, we need to calculate the max-height of the content based on the viewport height.
$mobile-tab-content-max-height: calc(100dvh - #{$navbar-height} - #{$mobile-navbar-height} - #{$mobile-tab-vertical-padding} - #{$mobile-tab-title-line-height} - #{$mobile-tab-title-margin-bottom})

// Mixin for scrollable containers that prevents layout shift and rubber-banding
@mixin scrollable-container($max-height: $mobile-tab-content-max-height)
  max-height: $max-height
  overflow: auto
  overscroll-behavior: contain
  // The following prevents layout shift when the scrollbar becomes visible.
  scrollbar-gutter: stable

.mobile-navbar-buttons
  display: none
  max-height: $mobile-navbar-height
  width: 100%
  position: fixed
  bottom: 0
  padding: 0px 30px
  justify-content: space-between
  box-shadow: 0px 0px 12px rgba(0, 0, 0 ,0.16)
  background-color: white
  z-index: 200
  .mobile-navbar-btn
    padding: 24px 12px 36px 12px
    border-top: 4px solid white
    &.active
      border-top: 4px solid black
    &.bottom-pane
      svg
        transform: rotate(-90deg)
    &.task-pane
      svg
        transform: rotate(180deg)
  .jd-icon
    width: 28px
    height: 28px
    stroke-width: 2px
    cursor: pointer

.mobile-tab
  position: fixed
  top: 45px
  background-color: #ffffff
  width: 100%
  height: 100%
  z-index: 1
  display: block
  padding: $mobile-tab-vertical-padding $mobile-tab-horizontal-padding
  &.notifications
    .required-actions-card
      width: auto
  &.chats
    .mobile-tab-content
      overflow: hidden
      scrollbar-gutter: unset
    .recent-activity-items-viewport
      // In chat tab, we load `recent_activity_dropdown` template dynamically.
      // The template handles the scroll event to load more items,
      // so we set the max-height of it's viewport instead of the tab content.
      @include scrollable-container
      .recent-activity-item
        padding: 8px 0px

  .mobile-tab-title
    font-size: 16px
    font-weight: bold
    margin-bottom: $mobile-tab-title-margin-bottom

  .mobile-tab-content
    @include scrollable-container

@include mobile
  .mobile-navbar-buttons
    display: flex

// RTL modifications
.right-to-left
  .mobile-tab
    .mobile-tab-title
      text-align: right
<template name="justdo_site_admin_members">
  <div class="site-admins-header">
    <div class="users-filter-wrapper">
      <div class="input-wrapper">
        <input type="text" class="form-control form-control-sm users-filter" placeholder="Search" />
        {{#if filterIsActive}}
          <div class="users-filter-control">
            <div class="users-filter-count bg-primary">
              {{filteredUsersCount}}
            </div>
            <svg class="jd-icon jd-c-pointer text-dark users-filter-clear p-1" style=""><use xlink:href="/layout/icons-feather-sprite.svg#x"></use></svg>
          </div>
        {{/if}}
      </div>
      <button class="btn btn-primary btn-sm refresh-site-users">Refresh</button>
    </div>
    <div class="site-admins-stat-wrapper">
      <div class="site-admins-stat-container">
        Active users:
        <div class="site-admins-info-value" title='"Active users" displays the total number of individuals who currently have access to JustDo. This count includes both licensed users and those who have been granted temporary access, such as during a grace or trial period. Additionally, the "Remarks" column provides details about these temporarily authorized users, including when their access will expire.'>
          {{activeUsersCount}}
        </div>
        {{#if licensingEnabled}}
          <div class="site-admins-info-divider"></div>
          {{#if unlimitedLicense}}
            Licensed users:
            <div class="site-admins-info-value">
              Unlimited
            </div>
          {{else}}
            Licenses available:
            <div class="site-admins-info-value">
              {{licensePermittedUsers}}
            </div>
            <div class="site-admins-info-divider"></div>
            Licenses in use:
            <div class="site-admins-info-value">
              {{licensedUsersCount}}
            </div>
          {{/if}}

          {{#with trialCutoff}}
            <div class="site-admins-info-divider"></div>
            Trial ends:
            <div class="site-admins-info-value" title="During the trial period, all users have unlimited licenses. Once the trial ends, any user exceeding the available license count must obtain a license to continue using JustDo. Users who will lose access after the trial are indicated in the Remarks column.">
              {{this}}
            </div>
          {{/with}}

          <div class="site-admins-info-divider"></div>
          Valid until:
          <div class="site-admins-info-value" title="This date represents when your license will expire.">
            {{licenseValidUntil}}
          </div>

          {{#if isLicenseExpired}}
            <div class="site-admins-info-divider"></div>
            Operational until:
            <div class="site-admins-info-value" title='After the license expires, we provide a brief grace period during which the system remains operational. However, as soon as the date indicated under "Operational until" is reached, the system will cease to function.'>
              {{licenseOperationalUntil}}
            </div>
          {{/if}}

        {{/if}}
      </div>
    </div>
  </div>

  <div class="site-admins-content">
    <table class="table site-admins-table">
      <tr>
        <th class="sort-by {{#if $eq activeFilter 'name'}}active{{/if}}" sort-by="name"><div class="sort-by-wrapper">Name<svg class="jd-icon chevron"><use xlink:href="/layout/icons-feather-sprite.svg#{{#if orderByFieldDesc}}chevron-down{{else}}chevron-up{{/if}}"></use></svg></div></th>
        <th class="sort-by {{#if $eq activeFilter 'email'}}active{{/if}}" sort-by="email"><div class="sort-by-wrapper">Email<svg class="jd-icon chevron"><use xlink:href="/layout/icons-feather-sprite.svg#{{#if orderByFieldDesc}}chevron-down{{else}}chevron-up{{/if}}"></use></svg></div></th>
        <th class="sort-by {{#if $eq activeFilter 'remarks'}}active{{/if}}" sort-by="remarks"><div class="sort-by-wrapper">Remarks <svg class="jd-icon chevron"><use xlink:href="/layout/icons-feather-sprite.svg#{{#if orderByFieldDesc}}chevron-down{{else}}chevron-up{{/if}}"></use></svg></div></th>
        <th class=""></th>
      </tr>

      {{#each siteUsers}}
        <tr>
          <td>{{> justdo_avatar}} <span>{{> display_name_with_graphic_unverified_warning}}</span></td>
          <td title="{{getPseudoFieldVal 'email'}}"><span>{{getPseudoFieldVal "email"}}</span></td>
          <td>{{{xssGuard getPseudoRemarksVal}}}</td>
          <td class="site-admins-list-item-action"><svg class="jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#more-vertical"></use></svg></td>
        </tr>
      {{/each}}
      
    </table>

  </div>
</template>

<template name="dashboard_projects">
  <div class="dashboard-projects">
    <div class="container">
      <div class="dashboard-header">
        <input class="dashboard-search-input form-control" placeholder="{{_ "search_justdos_label"}}" type="text">
      </div>

      <div class="projects-list">
        <div class="projects-header">
          JustDos
          <div class="create-project create-project-js text-primary"><svg class="jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#plus"/></svg>{{_ "create_new_justdo_label"}}</div>
        </div>
        {{#if projects}}
          {{#each projects}}
            {{> dashboard_projects_project_card}}
          {{/each}}
        {{else}}
          <div class="dashboard-empty bg-light">No projects</div>
        {{/if}}
      </div>
    </div>
  </div>

</template>

<template name="dashboard_projects_project_card">
  <div class="project-card-wrapper">
    <a class="project-card {{#unless members}}guest{{/unless}}" href="{{pathFor route='project' data=this}}">
      <div class="project-icon bg-primary"></div>
      <div class="project-title">{{title}}</div>
      {{> dashboard_projects_project_card_members}}
    </a>
  </div>
</template>

<template name="dashboard_projects_project_card_members">
  <div class="project-members">
    {{#if members}}
      {{> justdo_avatars_box
            box_grid=box_grid
            primary_users=primary_users
            secondary_users=secondary_users
            show_button="on-excess"
      }}
    {{else}}
      {{!--Guests don't see anyone else, wrap with similar dom generated by justdo_avatars_box to keep consistent UI--}}
      <div class="justdo-avatars-box">
        <div class="cont">
          {{#with userAvatarFields}}
            {{> justdo_avatar}}
          {{/with}}
        </div>
      </div>
    {{/if}}
  </div>
</template>

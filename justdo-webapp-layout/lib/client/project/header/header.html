<template name="project_header">
  <div class="project-header d-flex flex-column">
    <div class="middle-project-header-items d-flex align-items-center">
      {{> project_operations_toolbar}}
      {{> panes_controls}}
    </div>
  </div>
</template>

<template name="project_header_global_layout_header_right">
  <div class="project-page-global-layout-header-right d-flex align-items-center">
    {{#each rightNavbarItems}}
      {{#if template}}
        {{> Template.dynamic template=template data=template_data}}
      {{else if html}}
        {{{html}}}
      {{/if}}
    {{/each}}
  </div>
</template>

<template name="project_header_global_layout_header_middle">
  {{> project_name}}
</template>

<template name="project_name">
  {{!--

    The new design doesn't work well with the project logo feature.

    {{#with getProjectConfigurationSetting "project_logo"}}
      <div class="project-logo" style="
        background-image: url({{this}});
        {{#with getProjectConfigurationSetting "project_logo_width"}}
          width: {{this}}px;
        {{/with}}
      "></div>
    {{/with}}

  --}}

  <input type="text" id="project-name"
         class="{{#if project_is_untitled}}untitled{{/if}} form-control text-dark {{#unless is_project_admin}}project-name-disabled{{/unless}}"
         placeholder="Untitled JustDo"
         value="{{project_title}}"
  >
</template>

<template name="project_settings">
  <div id="project-settings-dropdown" class="dropdown project-header-button">
    <div id="settingsDropdown" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <svg class="jd-icon jd-c-pointer text-dark"><use xlink:href="/layout/icons-feather-sprite.svg#settings"/></svg>
    </div>

    <ul class="dropdown-menu dropdown-menu-right jd-p-075 animate slideIn shadow-lg border-0" aria-labelledby="settingsDropdown">
      {{#each settingsDropdownTopItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}

      <li id="register-project-for-daily-email" class="dropdown-item d-flex align-items-center px-1">
      {{#if isSubscribedToDailyEmail}}
        <svg class="jd-icon-dropdown text-primary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-right"/></svg>
      {{else}}
        <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-left"/></svg>
      {{/if}}
      Email daily updates for this JustDo</li>
      <li class="dropdown-item email-notifications d-flex align-items-center px-1">
      {{#if isSubscribedToEmailNotifications}}
        <svg class="jd-icon-dropdown text-primary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-right"/></svg>
      {{else}}
        <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-left"/></svg>
      {{/if}}
      Email ownership transfer notifications</li>
      {{#if showRolesAndGroupsManager}}
        <li class="roles-and-groups-manager dropdown-item d-flex align-items-center px-1">
          <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#users"></use></svg> Roles &amp; Groups Manager
        </li>
      {{/if}}

      {{#each settingsDropdownMiddleItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}

      {{#if customJustdoSaveDefaultViewEnabled}}
        <hr class="my-2">
        <li class="reset-default-views-columns dropdown-item d-flex align-items-center px-1">
          <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#rotate-ccw"/></svg>Load default columns views
        </li>

        {{#if is_project_admin}}
          <li class="set-current-columns-structure-as-default dropdown-item d-flex align-items-center px-1">
            <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#layout"/></svg>Set current columns structure as default
          </li>
        {{/if}}
      {{/if}}

      {{#if is_project_admin}}
        <hr class="my-2">
        <li id="project-config" class="dropdown-item d-flex align-items-center px-1"><svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#settings"/></svg> Configure this JustDo</li>
        {{> project_settings_dropdown_remove_project}}
      {{/if}}

      {{#each settingsDropdownBottomItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}
    </ul>
  </div>
</template>

<template name="search_comp">
  <div class="project-header-toolbar-divider ml-1 mr-3"></div>
  <div id="project-search-comp-container"></div>
  <div class="project-header-toolbar-divider mx-3"></div>
</template>

<template name="panes_controls">
  <div id="panes-controls">
    {{#if isBottomPaneAvailable}}
      <svg class="jd-icon jd-c-pointer text-dark bottom-pane-control {{#if isBottomPaneOpen}}control-opened{{/if}}">
        <title>{{#if isBottomPaneOpen}}Hide JustDo Pane{{else}}Show JustDo Pane{{/if}}</title>
        <use xlink:href="/layout/icons-feather-sprite.svg#sidebar"></use>
      </svg>
    {{/if}}
    <svg class="jd-icon jd-c-pointer text-dark task-pane-control {{#if isTaskPaneOpen}}control-opened{{/if}}">
      <title>{{#if isTaskPaneOpen}}Hide Task Pane{{else}}Show Task Pane{{/if}}</title>
      <use xlink:href="/layout/icons-feather-sprite.svg#sidebar"></use>
    </svg>
  </div>
</template>

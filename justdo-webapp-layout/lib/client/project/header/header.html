<template name="project_header">
  <div class="project-header d-flex flex-column">
    <div class="above-project-header-items">
      {{#each aboveProjectHeaderItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}
    </div>

    <div class="middle-project-header-items d-flex align-items-center">
      {{> project_operations_toolbar}}
      {{> search_comp}}
    </div>

    <div class="below-project-header-items">
      {{#each belowProjectHeaderItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}
    </div>
  </div>
</template>

<template name="project_header_global_layout_header_right">
  <div class="project-page-global-layout-header-right d-flex align-items-center">
    {{#each rightNavbarItems}}
      {{#if template}}
        {{> Template.dynamic template=template data=template_data}}
      {{else if html}}
        {{{html}}}
      {{/if}}
    {{/each}}
  </div>
</template>

<template name="project_header_global_layout_header_middle">
  {{> project_name}}
</template>

<template name="project_name">
  {{!--

    The new design doesn't work well with the project logo feature.

    {{#with getProjectConfigurationSetting "project_logo"}}
      <div class="project-logo" style="
        background-image: url({{this}});
        {{#with getProjectConfigurationSetting "project_logo_width"}}
          width: {{this}}px;
        {{/with}}
      "></div>
    {{/with}}

  --}}

  <input type="text" id="project-name"
         disabled={{#unless is_project_admin}}"disabled"{{/unless}}
         class="{{#if project_is_untitled}}untitled{{/if}} form-control text-dark"
         placeholder="Untitled JustDo"
         value="{{project_title}}"
  >
</template>

<template name="project_settings">
  <div id="project-settings-dropdown" class="dropdown">
    <div id="settingsDropdown" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
      <svg class="jd-icon jd-c-pointer text-dark"><use xlink:href="/layout/icons-feather-sprite.svg#settings"/></svg>
    </div>

    <ul class="dropdown-menu dropdown-menu-right jd-p-075 animate slideIn shadow-lg border-0" aria-labelledby="settingsDropdown">
      <li id="register-project-for-daily-email" class="dropdown-item d-flex align-items-center px-1">
      {{#if isSubscribedToDailyEmail}}
        <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-left"/></svg>
      {{else}}
        <svg class="jd-icon-dropdown text-primary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-right"/></svg>
      {{/if}}
      Email daily updates for this JustDo</li>

      <li class="dropdown-item email-notifications d-flex align-items-center px-1">
      {{#if isSubscribedToEmailNotifications}}
        <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-left"/></svg>
      {{else}}
        <svg class="jd-icon-dropdown text-primary"><use xlink:href="/layout/icons-feather-sprite.svg#toggle-right"/></svg>
      {{/if}}
      Email ownership transfer notifications</li>
      {{#if showRolesAndGroupsManager}}
        <li class="roles-and-groups-manager dropdown-item d-flex align-items-center">
          <i class="fa fa-users fa-fw" aria-hidden="true"></i> Roles &amp; Groups Manager
        </li>
      {{/if}}

      {{#if customJustdoSaveDefaultViewEnabled}}
      <hr class="my-2 border-light">
        <li class="reset-default-views-columns dropdown-item d-flex align-items-center px-1">
          <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#x-square"/></svg>Reset Default Views columns
        </li>

        {{#if is_project_admin}}
          <li class="set-current-columns-structure-as-default dropdown-item d-flex align-items-center px-1">
            <svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#layout"/></svg>Set Current Columns Structure as Default
          </li>
          <hr class="my-2 border-light">
        {{/if}}
      {{/if}}

      {{#if is_project_admin}}
        <li id="project-config" class="dropdown-item d-flex align-items-center px-1"><svg class="jd-icon-dropdown text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#sliders"/></svg> Configure this JustDo</li>
        {{> project_settings_dropdown_remove_project}}
      {{/if}}
    </ul>
  </div>
</template>

<template name="search_comp">
  <div id="project-search-comp-container"></div>
</template>

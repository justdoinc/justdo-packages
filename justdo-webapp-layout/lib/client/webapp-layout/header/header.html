<template name="header">
  <nav class="navbar navbar-light shadow-sm border-0 justify-content-between py-0" style="width: {{getHeaderWidth}}px">
    <div class="d-flex align-items-center">
      <div class="drawer-icon">
        <svg class="jd-icon text-secndary"><use xlink:href="/layout/icons-feather-sprite.svg#menu"/></svg>
      </div>
      <a class="brand" href="/">
        <svg class="jd-logo-svg" viewBox="0 0 100 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path class="jd-logo-part-1" d="M18.1184 0H2.05374C0.919493 0 0 0.911801 0 2.03656V17.9634C0 19.0882 0.919493 20 2.05374 20H18.1184C19.2526 20 20.1721 19.0882 20.1721 17.9634V2.03656C20.1721 0.911801 19.2526 0 18.1184 0Z"></path>
          <path class="jd-logo-part-2" d="M11.4982 15.9002L5.64823 10.1001C5.31398 9.76874 5.31398 9.23134 5.64823 8.89998L6.95946 7.59988C7.29363 7.2686 7.83538 7.2686 8.16955 7.59988L11.4982 10.9001C11.8324 11.2315 12.3741 11.2315 12.7083 10.9001L21.08 2.59989C21.4142 2.26856 21.9559 2.26856 22.2901 2.59989L23.6013 3.89994C23.9356 4.23132 23.9356 4.76872 23.6013 5.10008L12.7083 15.9002C12.3741 16.2314 11.8324 16.2314 11.4982 15.9002Z"></path>
          <path class="jd-logo-part-3" d="M34.5671 12.3804C34.5671 13.3466 34.4473 14.2178 34.2077 14.994C33.9681 15.7702 33.6087 16.4314 33.1295 16.9779C32.6582 17.5244 32.0672 17.9442 31.3564 18.2372C30.6455 18.5302 29.8189 18.6768 28.8765 18.6768C28.4452 18.6768 28.0219 18.649 27.6066 18.5936C27.1913 18.5461 26.756 18.4669 26.3008 18.356C26.3247 18.0392 26.3527 17.7224 26.3846 17.4056C26.4166 17.0888 26.4445 16.772 26.4685 16.4552C26.4925 16.281 26.5603 16.1423 26.6722 16.0394C26.792 15.9285 26.9597 15.8731 27.1753 15.8731C27.3111 15.8731 27.4868 15.9008 27.7025 15.9562C27.9261 16.0117 28.2056 16.0394 28.5411 16.0394C28.9963 16.0394 29.3996 15.976 29.7511 15.8493C30.1025 15.7147 30.394 15.5048 30.6256 15.2197C30.8652 14.9346 31.0449 14.5663 31.1647 14.1148C31.2845 13.6555 31.3444 13.1011 31.3444 12.4517V1.30824H34.5671V12.3804ZM48.057 6.29783V18.4867H46.248C45.8567 18.4867 45.6092 18.3085 45.5053 17.9521L45.3016 16.9779C44.7985 17.4848 44.2434 17.8967 43.6364 18.2134C43.0294 18.5223 42.3146 18.6768 41.4919 18.6768C40.821 18.6768 40.2261 18.5658 39.7069 18.3441C39.1958 18.1144 38.7645 17.7936 38.413 17.3818C38.0617 16.97 37.7941 16.4829 37.6104 15.9206C37.4347 15.3504 37.3468 14.7247 37.3468 14.0436V6.29783H40.3059V14.0436C40.3059 14.788 40.4776 15.3662 40.821 15.778C41.1725 16.182 41.6956 16.3839 42.3904 16.3839C42.9017 16.3839 43.3809 16.273 43.8281 16.0513C44.2753 15.8216 44.6987 15.5088 45.098 15.1128V6.29783H48.057ZM58.4906 8.67382C58.4108 8.80051 58.3269 8.89165 58.239 8.94706C58.1513 8.99458 58.0394 9.01834 57.9036 9.01834C57.7598 9.01834 57.6041 8.97871 57.4364 8.89954C57.2767 8.82037 57.089 8.73322 56.8733 8.63818C56.6577 8.53525 56.4101 8.44411 56.1305 8.36494C55.859 8.28577 55.5356 8.24614 55.1602 8.24614C54.5771 8.24614 54.1179 8.36893 53.7824 8.61442C53.455 8.85991 53.2913 9.18067 53.2913 9.5767C53.2913 9.83806 53.3751 10.0598 53.5428 10.242C53.7186 10.4162 53.9462 10.5706 54.2257 10.7053C54.5132 10.84 54.8367 10.9627 55.1961 11.0736C55.5555 11.1765 55.9189 11.2914 56.2863 11.4181C56.6617 11.5448 57.0291 11.6913 57.3885 11.8577C57.7479 12.0161 58.0674 12.2219 58.3469 12.4754C58.6344 12.7209 58.862 13.0179 59.0297 13.3664C59.2055 13.7149 59.2933 14.1346 59.2933 14.6257C59.2933 15.2118 59.1855 15.7543 58.9698 16.2532C58.7622 16.7443 58.4508 17.172 58.0354 17.5363C57.6201 17.8927 57.105 18.1738 56.4899 18.3798C55.883 18.5777 55.1802 18.6768 54.3814 18.6768C53.9582 18.6768 53.5428 18.6371 53.1355 18.558C52.7362 18.4867 52.3488 18.3837 51.9734 18.2491C51.6061 18.1144 51.2627 17.9561 50.9431 17.7739C50.6317 17.5917 50.3561 17.3937 50.1165 17.1799L50.7994 16.0632C50.8873 15.9285 50.9911 15.8256 51.1109 15.7543C51.2307 15.683 51.3825 15.6474 51.5661 15.6474C51.7498 15.6474 51.9216 15.6989 52.0813 15.8018C52.249 15.9047 52.4407 16.0156 52.6563 16.1344C52.8719 16.2532 53.1235 16.3641 53.4111 16.4671C53.7066 16.57 54.078 16.6215 54.5252 16.6215C54.8767 16.6215 55.1762 16.5819 55.4237 16.5027C55.6793 16.4156 55.887 16.3047 56.0467 16.1701C56.2144 16.0354 56.3342 15.881 56.4061 15.7068C56.486 15.5246 56.5259 15.3385 56.5259 15.1484C56.5259 14.8633 56.4381 14.6297 56.2623 14.4475C56.0946 14.2653 55.867 14.107 55.5795 13.9723C55.3 13.8376 54.9765 13.7188 54.6091 13.6159C54.2497 13.505 53.8783 13.3862 53.4949 13.2595C53.1196 13.1328 52.7482 12.9863 52.3808 12.8199C52.0214 12.6457 51.6979 12.4279 51.4104 12.1665C51.1309 11.9052 50.9033 11.5844 50.7275 11.2043C50.5598 10.8241 50.4759 10.3648 50.4759 9.82618C50.4759 9.32722 50.5758 8.85202 50.7754 8.40058C50.9752 7.94914 51.2666 7.55711 51.65 7.22447C52.0414 6.88394 52.5245 6.6146 53.0996 6.41663C53.6827 6.21068 54.3535 6.10775 55.1122 6.10775C55.9589 6.10775 56.7296 6.24632 57.4244 6.52355C58.1192 6.80078 58.6983 7.16507 59.1615 7.61651L58.4906 8.67382ZM65.6177 18.6768C64.5474 18.6768 63.7248 18.3798 63.1498 17.7858C62.5827 17.1839 62.2992 16.3562 62.2992 15.3028V8.49562H61.0413C60.8815 8.49562 60.7458 8.44412 60.634 8.34118C60.5221 8.23825 60.4662 8.08381 60.4662 7.87787V6.71363L62.443 6.39287L63.0659 3.06648C63.1059 2.90808 63.1817 2.78532 63.2936 2.6982C63.4054 2.61108 63.5492 2.56752 63.7248 2.56752H65.2583V6.40475H68.5409V8.49562H65.2583V15.1009C65.2583 15.481 65.3501 15.778 65.5338 15.9919C65.7255 16.2057 65.9851 16.3126 66.3126 16.3126C66.4963 16.3126 66.648 16.2929 66.7678 16.2532C66.8955 16.2057 67.0034 16.1582 67.0913 16.1107C67.1871 16.0632 67.271 16.0196 67.3428 15.98C67.4147 15.9325 67.4866 15.9087 67.5585 15.9087C67.6464 15.9087 67.7182 15.9325 67.7741 15.98C67.83 16.0196 67.8899 16.0829 67.9538 16.1701L68.8404 17.5957C68.4091 17.9521 67.9139 18.2213 67.3548 18.4035C66.7958 18.5857 66.2167 18.6768 65.6177 18.6768ZM86.2853 9.89746C86.2853 11.1567 86.0731 12.3131 85.6504 13.3664C85.2268 14.4197 84.6321 15.3266 83.8653 16.0869C83.0984 16.8472 82.176 17.4373 81.0978 17.857C80.0195 18.2768 78.8215 18.4867 77.5037 18.4867H70.9027V1.30824H77.5037C78.8215 1.30824 80.0195 1.52208 81.0978 1.94976C82.176 2.36952 83.0984 2.95956 83.8653 3.71988C84.6321 4.47228 85.2268 5.37518 85.6504 6.42851C86.0731 7.48184 86.2853 8.63818 86.2853 9.89746ZM82.9786 9.89746C82.9786 8.95495 82.8508 8.11148 82.5953 7.36703C82.3476 6.6146 81.9843 5.98106 81.5051 5.46623C81.0338 4.94351 80.4588 4.54356 79.7799 4.26635C79.109 3.98915 78.3503 3.85056 77.5037 3.85056H74.1373V15.9444H77.5037C78.3503 15.9444 79.109 15.8058 79.7799 15.5286C80.4588 15.2513 81.0338 14.8554 81.5051 14.3406C81.9843 13.8178 82.3476 13.1842 82.5953 12.4398C82.8508 11.6873 82.9786 10.84 82.9786 9.89746ZM93.9381 6.10775C94.8486 6.10775 95.6752 6.2543 96.418 6.54731C97.1684 6.84032 97.8076 7.25612 98.3348 7.7947C98.8696 8.33329 99.2812 8.99059 99.5687 9.76678C99.8563 10.543 100 11.4102 100 12.3685C100 13.3348 99.8563 14.2059 99.5687 14.9821C99.2812 15.7583 98.8696 16.4196 98.3348 16.966C97.8076 17.5125 97.1684 17.9323 96.418 18.2253C95.6752 18.5183 94.8486 18.6649 93.9381 18.6649C93.0199 18.6649 92.1847 18.5183 91.4342 18.2253C90.6837 17.9323 90.0402 17.5125 89.5054 16.966C88.9783 16.4196 88.5667 15.7583 88.2715 14.9821C87.9839 14.2059 87.8402 13.3348 87.8402 12.3685C87.8402 11.4102 87.9839 10.543 88.2715 9.76678C88.5667 8.99059 88.9783 8.33329 89.5054 7.7947C90.0402 7.25612 90.6837 6.84032 91.4342 6.54731C92.1847 6.2543 93.0199 6.10775 93.9381 6.10775ZM93.9381 16.4077C94.9607 16.4077 95.7154 16.0672 96.2023 15.386C96.6978 14.7049 96.9451 13.7069 96.9451 12.3923C96.9451 11.0776 96.6978 10.0757 96.2023 9.38662C95.7154 8.69758 94.9607 8.35306 93.9381 8.35306C92.9001 8.35306 92.1291 8.70157 91.6259 9.3985C91.1304 10.0875 90.8831 11.0855 90.8831 12.3923C90.8831 13.699 91.1304 14.697 91.6259 15.386C92.1291 16.0672 92.9001 16.4077 93.9381 16.4077Z"></path>
        </svg>
      </a>
    </div>

    {{#with middleHeaderTemplate}}
      {{> UI.dynamic template=middleHeaderTemplate}}
    {{/with}}

    {{#if loginStateIs "logged-in"}}
      <div class="d-flex align-items-center">
        {{#each globalRightNavbarItems}}
          {{#if template}}
            {{> Template.dynamic template=template data=template_data}}
          {{else if html}}
            {{{html}}}
          {{/if}}
        {{/each}}

        {{> loginButtons}}
      </div>
    {{/if}}
  </nav>

  <div class="drawer d-flex flex-column bg-white">
    <div class="projects-header text-primary font-weight-bold d-flex justify-content-between align-items-center">
      JustDos
      <svg class="create-new-project text-primary"><use xlink:href="/layout/icons-feather-sprite.svg#jd-create"/></svg>
    </div>
    <div class="projects-wrapper h-100">
      <ul class="list-group list-group-flush">
        {{#each projects}}
          <a href="/p/{{_id}}" class="list-group-item list-group-item-action project-item p-2">{{#if title}}{{title}}{{else}}Untitled JustDo{{/if}}</a>
        {{/each}}
      </ul>
    </div>
    {{#with drawerPagesMenuItems}}
      <div class="pages-section pt-2">
        {{#each this}}
          <div class="menu-item pb-2">
            {{#if template}}
              {{> Template.dynamic template=template data=template_data}}
            {{else if html}}
              {{{html}}}
            {{/if}}
          </div>
        {{/each}}
      </div>
    {{/with}}

    <div class="drawer-footer px-0 py-3 d-flex justify-content-center bg-white">
      {{#each drawerBottomMenuItems}}
        {{#if template}}
          {{> Template.dynamic template=template data=template_data}}
        {{else if html}}
          {{{html}}}
        {{/if}}
      {{/each}}
    </div>
  </div>
  <div class="drawer-backdrop"></div>

  <div class="container-fluid global-messages" style="width: {{getWindowWidth}}px">
    {{> status}}
    {{> timesync_status}}
  </div>
</template>

<template name="meetings_meeting_dialog">
  <div class="meetings_meeting-dialog {{meeting.status}}">
    <!-- Meeting Header -->
    <div class="meeting-dialog-header">
      <div class="meeting-dialog-state shadow-sm rounded-sm {{#if $eq meeting.status 'pending'}}bg-primary{{/if}} {{#if $eq meeting.status 'in-progress'}}bg-success{{/if}}">{{meeting.status}}</div>
      <div class="meeting-dialog-actions shadow-sm rounded d-flex align-items-center">
        <svg class="jd-icon meeting-print">
          <use xlink:href="/layout/icons-feather-sprite.svg#printer"/>
          <title>Print meeting</title>
        </svg>
        <div class="meeting-dialog-divider bg-secondary"></div>
        <svg class="jd-icon meeting-email">
          <use xlink:href="/layout/icons-feather-sprite.svg#mail"/>
          <title>Email meeting details</title>
        </svg>
        <div class="meeting-dialog-divider bg-secondary"></div>
        <svg class="jd-icon meeting-copy">
          <use xlink:href="/layout/icons-feather-sprite.svg#copy"/>
          <title>Copy meeting details to the clipboard</title>
        </svg>
      </div>
      <svg class="meeting-dialog-close jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#x"/></svg>
    </div>
    <!-- Meeting Info -->
    <div class="meeting-dialog-info">
      <div class="meeting-dialog-options d-flex align-items-center">
        <input type="text" name="title" placeholder="Meeting Name" value="{{meeting_title}}" autocomplete="off" class="meeting-dialog-title flex-grow-1">
        <div class="meetings-dialog-options d-flex align-items-center">
          <div class="meeting-date-wrapper">
            <div class="text-primary meeting-date-label">{{labelDate doc.date}}</div>
            <input type="text" name="date" value="{{rawdate doc.date}}" class="meeting-date" readonly="readonly">
          </div>
          <div class="mr-1">,</div>
          <div class="meeting-time-wrapper dropdown">
            <div class="text-primary meeting-time-label" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">{{labelTime doc.time}}</div>
            <input type="text" name="time" class="meeting-time" readonly="readonly">
            <div class="meeting-time-picker dropdown-menu dropdown-menu-right shadow-lg p-2 border-0">
              <div class="d-flex">
                <div class="meeting-time-hours-wrapper">
                  <div class="meeting-time-up">
                    <svg class="jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#chevron-up"/></svg>
                  </div>
                  <div class="meeting-time-hours">{{labelTimeHours doc.time}}</div>
                  <div class="meeting-time-down">
                    <svg class="jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#chevron-down"/></svg>
                  </div>
                </div>
                <div class="meeting-time-minutes-wrapper">
                  <div class="meeting-time-up">
                    <svg class="jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#chevron-up"/></svg>
                  </div>
                  <div class="meeting-time-minutes">{{labelTimeMinutes doc.time}}</div>
                  <div class="meeting-time-down">
                    <svg class="jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#chevron-down"/></svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- <div class="meeting-dialog-divider bg-secondary"></div>
          {{#if doc.locked}}
            <svg class="jd-icon text-primary {{mayLockClass}} meeting-lock"><use xlink:href="/layout/icons-feather-sprite.svg#lock"/></svg>
          {{else}}
            <svg class="jd-icon text-primary {{mayLockClass}} meeting-lock"><use xlink:href="/layout/icons-feather-sprite.svg#unlock"/></svg>
          {{/if}}
          <div class="lock-msg">
            {{#if mayLock}}
              {{#if doc.locked}}
                <span class="msg-main-text">Click to unlock meeting</span>
                <span class="msg-sub-text">let meeting participants to edit the agenda, notes, etc</span>
              {{else}}
                <span class="msg-main-text">Click to lock meeting</span>
                <span class="msg-sub-text">reserve the right to edit the agenda, notes, etc. to yourself</span>
              {{/if}}
            {{else}}
              {{#if doc.locked}}
                <span class="msg-main-text">Meeting is locked</span>
                <span class="msg-sub-text">you can't edit the agenda, notes, etc</span>
              {{else}}
                <span class="msg-main-text">Meeting is unlocked</span>
                <span class="msg-sub-text">you can edit the agenda, notes, etc</span>
              {{/if}}
            {{/if}}
          </div> -->
        </div>
      </div>
      <div class="meeting-members">
        {{#with meeting}}
          {{> meetings_meeting_members}}
        {{/with}}
      </div>
    </div>
    <!-- Meeting Agenda -->
    <div class="meeting-dialog-agenda-title">
      Agenda
      {{#if mayEditAgenda}}
        <svg class="meeting-dialog-add-task text-primary jd-icon"><use xlink:href="/layout/icons-feather-sprite.svg#plus"></use></svg>
      {{/if}}
    </div>
    <div class="meeting-dialog-agenda">
      <div class="meeting-tasks-list">
        {{#unless noRander}}
          {{#each tasks}}
            {{> meetings_dialog_task}}
          {{/each}}
        {{/unless}}
      </div>
      {{#if mayEditAgenda}}
        <div class="meeting-dialog-add-task-wrapper">
          <input type="text" size="6" name="seqId" placeholder="Type task number" autocomplete="off" class="form-control meeting-task-add">
        </div>
      {{/if}}
    </div>
    <!-- Meeting Footer -->
    <div class="meeting-dialog-footer">
      {{#if showMeetingNote}}
        <div class="meeting-note">
          {{> locking_text_editor content=meeting.note class="note" placeholder="Note" lock=meeting.note_lock disabled=mayNotEditMeetingNote onSave=onSaveMeetingNote}}
        </div>
      {{/if}}
      <div class="d-flex align-items-center justify-content-end py-4">
        {{#if mayEdit}}
          {{#if showDiscardButton}}
            <button type="button" class="btn btn-secondary btn-sm text-uppercase font-weight-bold btn-cancel-meeting mr-2">Discard</button>
          {{/if}}
          {{#if $eq meeting.status "draft"}}
            <button type="button" class="btn btn-primary btn-sm text-uppercase font-weight-bold btn-publish-meeting">Publish</button>
          {{/if}}
          {{#if $eq meeting.status "pending"}}
            <button type="button" class="btn btn-primary btn-sm text-uppercase font-weight-bold btn-start-meeting">Start Meeting</button>
          {{/if}}
          {{#if $eq meeting.status "in-progress"}}
            <button type="button" class="btn btn-primary btn-sm text-uppercase font-weight-bold btn-end-meeting">End Meeting</button>
          {{/if}}
          {{#if $eq meeting.status "adjourned"}}
            <div class="done-msg">Meeting finished, you can reopen meeting to edit</div>
            <button type="button" class="btn btn-secondary btn-sm text-uppercase font-weight-bold btn-start-meeting">Reopen</button>
          {{/if}}
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="tasks_file_manager_files">
  {{#if files}}
    <div class="bulk-edit">
      {{#if bulkEditMode}}
        <div class="bulk-edit-done">
          Done
        </div>
      {{else}}
        <div class="bulk-edit-start">
          Edit
        </div>
      {{/if}}
    </div>
  {{/if}}

  <div class="tasks-file-manager-files {{#if bulkEditMode}}edit-mode{{/if}}">
    {{#each files}}
      {{#with task=.. file=.}}
        <div class="file pb-2 {{#if bulkSelectedFile}}selected{{/if}}">
          <div class="file-inner-wrapper bg-light">
            <div class="d-flex">
              {{#if bulkEditMode}}
                <div class="file-check-input">
                  <svg class="jd-icon icon-mark-check"><use xlink:href="/layout/icons-feather-sprite.svg#check"></use></svg>
                  <svg class="jd-icon icon-mark-circle"><use xlink:href="/layout/icons-feather-sprite.svg#circle"></use></svg>
                </div>
              {{/if}}
              <div class="type-logo-wrapper">
                <div class="type-logo shadow-sm {{typeClass}}"></div>
              </div>
              <div class="content flex-grow-1 mx-2">
                <div class="title">
                  {{#if renaming}}
                    <input class="form-control form-control-sm" type="text" name="title" value="{{file.title}}">
                  {{else}}
                    <a href="{{shareableLink}}" class="file-download-link">{{file.title}}</a>
                  {{/if}}
                </div>
                <small class="metadata text-muted">
                  <span class="date" title="{{userDateFormat file.date_uploaded}}">{{userDateFormat file.date_uploaded false}}, </span>
                  <span class="size">{{size}}, </span>
                  <span class="mimetype">{{displayedFileType file.type}}</span>
                </small>
              </div>
              {{#unless bulkEditMode}}
                {{#if renaming}}
                  <div class="actions-rename d-flex">
                    <svg class="file-rename-done jd-icon text-secondary mr-1"><use xlink:href="/layout/icons-feather-sprite.svg#check"/></svg>
                    <svg class="file-rename-cancel jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#x"/></svg>
                  </div>
                {{else}}
                  <div class="actions d-flex">
                    <svg class="file-direct-download-link jd-icon text-secondary mr-1"><use xlink:href="/layout/icons-feather-sprite.svg#download"/></svg>
                    <svg class="file-rename-link jd-icon text-secondary mr-1"><use xlink:href="/layout/icons-feather-sprite.svg#edit-3"/></svg>
                    <svg class="file-remove-link jd-icon text-secondary"><use xlink:href="/layout/icons-feather-sprite.svg#trash"/></svg>
                  </div>
                {{/if}}
              {{/unless}}
            </div>

            {{#if isPreviewSupported}}
              <div class="image-preview bg-light mt-2 file-download-link d-flex justify-content-center align-items-center loading {{tempPlaceHolder}}">
                <div class="loader">
                  <div class="double-bounce1 bg-primary"></div>
                  <div class="double-bounce2 bg-primary"></div>
                </div>
              </div>
            {{/if}}

            {{#if deletion}}
              <div class="msg d-flex justify-content-center align-items-center">
                <div class="msg-content text-center">
                  <a href="" class="msg-ok btn btn-primary btn-sm text-uppercase mr-1 font-weight-bold">Remove this file</a>
                  <a href="" class="msg-cancel btn btn-secondary btn-sm text-uppercase font-weight-bold">Cancel</a>
                </div>
              </div>
            {{/if}}
          </div>
        </div>
      {{/with}}
    {{/each}}
    {{#if bulkEditMode}}
      <div class="bulk-edit-control-wrapper">
        <div class="bulk-edit-control">
          {{#if bulkSelectedExist}}
            {{bulkSelectedCount}} File{{#if bulkSelectedCountGreaterThanOne}}s{{/if}} Selected
          {{/if}}
          <div class="bulk-edit-remove">
            Remove
          </div>
        </div>
      </div>
    {{/if}}
  </div>
</template>
